<div class="all_picture">
  <section class="all_pictures_top">
    <h1>Pictures</h1>

    <h3>ユーザー検索</h3>

    <%= search_form_for @picture_q, url: search_pictures_path do |f| %>
      <%= f.label :tags_id_eq, 'Tags Name' %>
      <%= f.collection_select :tags_id_eq, @tags, :id, :name, include_blank: 'タグ選択' %>
      
      <%= f.submit '検索' %>
    <% end %>
  </section>

  <section class="all_pictures_main">
    <table>
      <tbody class="picture">
        <% @pictures.each do |picture| %>
          <tr>
            <% unless picture.user.profile.image.present? %>
              <td><%= image_tag 'guest.png', size: '200x200', class: "rounded-circle", size: "50x50" %></td>
              <td><%= link_to "#{picture.user.name}", user_path(picture.user.id) %></td>
            <% else %>
              <td><%= image_tag picture.user.profile.image.url, class: "rounded-circle", size: "50x50" %></td>
              <td><%= link_to "#{picture.user.name}", user_path(picture.user.id) %></td>
            <% end %>
            <td><%= link_to image_tag(picture.image.url), picture_path(picture.id), {class: "heart"} %></td>
            <% if current_user.favorited_picture_by?(picture.id) %>
              <td><%= link_to image_tag('icon_heart_on.PNG', size: '50x50'), destroy_favorite_picture_path(picture), {method: :DELETE, remote: true, class: "heart"} %></td>
            <% else %>
              <td><%= link_to image_tag('icon_heart_off.PNG', size: '50x50'), create_favorite_picture_path(picture), {method: :POST, remote: true, class: "heart"} %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
</div>
